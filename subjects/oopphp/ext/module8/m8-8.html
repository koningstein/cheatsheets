<!DOCTYPE html>
<html lang="nl" data-theme="light" data-color="blue">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Samenvatting - OOP PHP Module 8</title>

    <script src="../../../../assets/js/theme-init.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <link rel="stylesheet" href="../../../../assets/css/style.css">
</head>
<body>

<div data-include="../../../../components/header.html"></div>

<div class="layout-wrapper">
    <div data-include="../../../../components/sidebar.html"></div>

    <main class="main-content">
        <h1>Samenvatting: Database Interactie</h1>

        <p>In Module 8 hebben we onze applicatie "persistent" gemaakt. Data blijft nu bewaard, ook als de browser wordt afgesloten. We hebben geleerd hoe we veilig en gestructureerd met een MySQL database communiceren via PHP Data Objects (PDO).</p>

        <h3>De CRUD Cyclus</h3>
        <p>Elke applicatie draait in de basis om vier operaties. Hier is hoe we die hebben vertaald naar code en Blackjack-functionaliteit:</p>

        <div class="table-wrapper">
            <table class="summary-table">
                <thead>
                <tr>
                    <th>Concept</th>
                    <th>SQL Commando</th>
                    <th>PHP Methode</th>
                    <th>Blackjack Voorbeeld</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td><strong>Create</strong></td>
                    <td><code>INSERT INTO</code></td>
                    <td><code>insert($table, $data)</code></td>
                    <td>Een behaalde score opslaan na een potje.</td>
                </tr>
                <tr>
                    <td><strong>Read</strong></td>
                    <td><code>SELECT</code></td>
                    <td><code>select($tables, $conditions)</code></td>
                    <td>De highscore-lijst ophalen en tonen.</td>
                </tr>
                <tr>
                    <td><strong>Update</strong></td>
                    <td><code>UPDATE</code></td>
                    <td><code>update($table, $data, $cond)</code></td>
                    <td>Het saldo van een speler bijwerken na winst.</td>
                </tr>
                <tr>
                    <td><strong>Delete</strong></td>
                    <td><code>DELETE</code></td>
                    <td><code>delete($table, $conditions)</code></td>
                    <td>Een foutieve score of account verwijderen.</td>
                </tr>
                </tbody>
            </table>
        </div>

        <h3>Veiligheid: Prepared Statements</h3>
        <p>Het allerbelangrijkste uit deze module is veiligheid. We plakken <strong>nooit</strong> variabelen direct in een SQL string.</p>



        <div class="info-box warning">
            <h3>⚠️ SQL Injection</h3>
            <p>Door gebruikersinput direct in een query te zetten (<code>"SELECT * FROM users WHERE name = '$name'"</code>), geef je hackers de sleutel tot je database.
                <br><strong>Oplossing:</strong> Gebruik altijd Placeholders (<code>:name</code>) en <code>bindValue()</code>.</p>
        </div>

        <h3>De Architectuur</h3>
        <p>We hebben niet zomaar code geschreven, we hebben een structuur opgezet:</p>
        <ol>
            <li><strong>Interface (Contract):</strong> De <code>Database</code> interface dwingt af welke methoden er moeten zijn.</li>
            <li><strong>Implementatie (Driver):</strong> De <code>MysqlDatabase</code> class voert het daadwerkelijke werk uit via PDO.</li>
            <li><strong>Manager (Singleton):</strong> De <code>DatabaseManager</code> zorgt ervoor dat we de verbinding makkelijk kunnen hergebruiken.</li>
        </ol>

        <h3>Van Array naar Object (Hydration)</h3>
        <p>Databases geven domme arrays terug. Onze applicatie werkt met slimme objecten. Het proces om die arrays om te zetten noemen we <strong>Hydration</strong>.</p>

        <pre><code class="language-php">// Ruwe Data (uit DB)       // Hydration               // Object (in App)
['points' => 21]      --->   new Score(21)      --->   $score->getPoints()</code></pre>

        <h3>Checklist voor je Eindopdracht</h3>
        <ul>
            <li>Gebruik je een <code>.env</code> bestand voor je wachtwoorden?</li>
            <li>Gebruik je overal <code>prepare()</code> en <code>execute()</code>/<code>bindValue()</code>?</li>
            <li>Hebben je <code>update</code> en <code>delete</code> functies een verplichte ID-check?</li>
            <li>Zijn je methodes generiek genoeg (werken ze voor elke tabel)?</li>
        </ul>

    </main>

    <aside class="sidebar-right">
        <div class="toc-container">
            <h4>Inhoud</h4>
            <ul id="toc-list" class="toc-list">
            </ul>
        </div>
    </aside>
</div>

<div data-include="../../../../components/footer.html"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="../../../../assets/js/script.js"></script>
</body>
</html>