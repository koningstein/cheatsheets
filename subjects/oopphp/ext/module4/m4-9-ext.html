<!DOCTYPE html>
<html lang="nl" data-theme="light" data-color="blue">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Samenvatting (Uitgebreid) - OOP PHP Module 4</title>

    <script src="../../../../assets/js/theme-init.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <link rel="stylesheet" href="../../../../assets/css/style.css">
</head>
<body>

<div data-include="../../../../components/header.html"></div>

<div class="layout-wrapper">
    <div data-include="../../../../components/sidebar.html"></div>

    <main class="main-content">
        <h1>Samenvatting: Van Code naar Webapplicatie</h1>

        <p>Gefeliciteerd! Je hebt Module 4 afgerond. Dit was een grote stap. Waar je eerst alleen losse PHP-scripts schreef die data toonden, heb je nu geleerd hoe je een echte <strong>interactieve webapplicatie</strong> bouwt.</p>
        <p>In deze module hebben we de brug geslagen tussen jouw OOP-code (de logica) en de gebruiker (de browser). Laten we de belangrijkste onderdelen nog één keer rustig op een rijtje zetten.</p>

        <h3>1. Debuggen: Het Licht aan doen</h3>
        <p>Toen we begonnen, moesten we vaak gokken wat er mis ging (<code>var_dump</code>). Nu hebben we professionele tools.</p>

        <div class="table-wrapper">
            <table class="summary-table">
                <thead>
                <tr>
                    <th>Tool</th>
                    <th>De Vergelijking</th>
                    <th>Wat doet het?</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td><strong>Xdebug</strong></td>
                    <td>De Videocamera</td>
                    <td>Hiermee pauzeer je de code terwijl hij draait. Je kunt variabelen bekijken, stap voor stap door je code lopen en precies zien waar het fout gaat (slow-motion).</td>
                </tr>
                <tr>
                    <td><strong>PHPStan</strong></td>
                    <td>De Spellingscontrole</td>
                    <td>Dit programma leest je code <em>voordat</em> je hem uitvoert. Hij waarschuwt je voor typefouten (bijv. tekst in een getal stoppen) of vergeten checks.</td>
                </tr>
                </tbody>
            </table>
        </div>



        <h3>2. Smarty: De Chef en de Ober</h3>
        <p>Om spaghetti-code (alles door elkaar) te voorkomen, hebben we logica en presentatie gescheiden gehouden. Dit is een gouden regel in webdevelopment.</p>

        <div class="info-box">
            <h3>Hoe werkte het ook alweer?</h3>
            <ul>
                <li><strong>PHP (De Chef):</strong> Regelt het spel, schudt de kaarten, berekent de score. Hij ziet de klant niet.</li>
                <li><strong>Smarty (De Ober):</strong> Krijgt de data van de chef en presenteert het netjes op het bord (HTML) aan de klant.</li>
            </ul>
        </div>



        <h3>3. Superglobals: De Postbodes</h3>
        <p>PHP-pagina's hebben geheugenverlies: ze vergeten alles zodra de pagina klaar is. Om data te bewaren of te versturen, gebruiken we Superglobals.</p>

        <div class="table-wrapper">
            <table class="summary-table">
                <thead>
                <tr>
                    <th>Naam</th>
                    <th>Type Transport</th>
                    <th>Gebruik</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td><code>$_GET</code></td>
                    <td>De Ansichtkaart</td>
                    <td>Data staat zichtbaar in de URL (<code>?page=home</code>). Iedereen kan het lezen. Gebruik dit voor navigatie.</td>
                </tr>
                <tr>
                    <td><code>$_POST</code></td>
                    <td>De Enveloppe</td>
                    <td>Data zit verstopt in het verzoek. Gebruik dit voor formulieren (invullen naam, knoppen).</td>
                </tr>
                <tr>
                    <td><code>$_SESSION</code></td>
                    <td>Het Kluisje</td>
                    <td>Data wordt veilig op de server bewaard. Gebruik dit om te onthouden wie er is ingelogd (of wat je hand is).</td>
                </tr>
                </tbody>
            </table>
        </div>



        <h3>4. De Ultieme Workflow: De Router</h3>
        <p>Hieronder zie je hoe alles samenkomt in <code>index.php</code>. We gebruiken een <strong>Switch</strong> statement als verkeersregelaar.</p>
        <p>Het grote voordeel van deze structuur is dat we de logica per pagina groeperen. Alles wat met "aanmaken" te maken heeft, zit in het blokje <code>create</code>.</p>



        <pre><code class="language-php">&lt;?php
// 1. VOORBEREIDING
// Classes laden en het geheugen (sessie) starten
require 'vendor/autoload.php';
session_start();

// Welke pagina wil de gebruiker zien? (Standaard: home)
$page = $_GET['page'] ?? 'home';

// 2. DE VERKEERSREGELAAR (ROUTER)
switch ($page) {

    // --- PAGINA: SPELER AANMAKEN ---
    case 'create':
        // A. Actie: Is het formulier verstuurd? (POST)
        if ($_SERVER['REQUEST_METHOD'] === 'POST') {

            // Validatie: Is de naam ingevuld?
            if (empty($_POST['name'])) {
                $error = "Naam is verplicht!";
            } else {
                // Maak speler en stop in het kluisje (Sessie)
                $player = new Player($_POST['name']);
                $_SESSION['player'] = $player;

                // Doorsturen naar het spel (Post-Redirect-Get)
                header('Location: index.php?page=game');
                exit;
            }
        }

        // B. Tonen: Laat het formulier zien
        // Als er een fout was, geven we die mee aan Smarty
        if (isset($error)) {
            $smarty->assign('error', $error);
        }
        $smarty->display('create_player.tpl');
        break;

    // --- PAGINA: HET SPEL ---
    case 'game':
        // Haal speler uit het kluisje
        $player = $_SESSION['player'] ?? null;

        // Check: Hebben we wel een speler?
        if ($player) {
            $smarty->assign('p', $player);
            $smarty->display('game.tpl');
        } else {
            // Geen speler? Dan mag je hier niet zijn. Terug naar start!
            header('Location: index.php?page=create');
        }
        break;

    // --- STANDAARD: HOME ---
    default:
        $smarty->display('home.tpl');
        break;
}</code></pre>

        <h3>Wat nu?</h3>
        <p>Je hebt nu een solide basis. Je kunt object georiënteerd programmeren, je code is netjes gescheiden en je kunt interactieve applicaties bouwen.</p>

    </main>

    <aside class="sidebar-right">
        <div class="toc-container">
            <h4>Inhoud</h4>
            <ul id="toc-list" class="toc-list">
            </ul>
        </div>
    </aside>
</div>

<div data-include="../../../../components/footer.html"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="../../../../assets/js/script.js"></script>
</body>
</html>