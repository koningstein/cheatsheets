<!DOCTYPE html>
<html lang="nl" data-theme="light" data-color="red">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Model & Migration - Laravel 12 Module 1</title>
    <script src="../../theme-init.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <link rel="stylesheet" href="../../style.css">
</head>
<body>

<div data-include="../../header.html"></div>

<div class="layout-wrapper">
    <div data-include="../../sidebar.html"></div>

    <main class="main-content">
        <h1>Publieke Layout</h1>
        <p>In Module 1 hebben we ons gericht op het Admin-gedeelte van de applicatie. Nu starten we met Module 2, waarin we de voorkant (de webshop) gaan bouwen voor de bezoekers. Bezoekers hebben een andere interface nodig dan beheerders. Ze hebben geen zijbalk met "Productbeheer" nodig, maar wel een winkelwagen en een knop om in te loggen.</p>
        <p>Daarom gaan we een tweede <strong>Masterpage</strong> maken, specifiek voor de publieke pagina's.</p>

        <div class="info-box" style="background: var(--bg-content); border: 1px solid var(--border-color); padding: 1rem; border-radius: 0.5rem;">
            <h2>Leeruitkomsten</h2>
            <ul style="margin-bottom: 0;">
                <li>Ik begrijp waarom we aparte layouts gebruiken voor Admin en Public.</li>
                <li>Ik kan een nieuwe masterpage opzetten die bestaande partials hergebruikt (DRY).</li>
                <li>Ik kan een specifieke navigatiebalk maken voor bezoekers.</li>
                <li>Ik kan conditionele links tonen op basis van authenticatie (Login/Register vs Dashboard).</li>
                <li>Ik kan Blade Directives zoals <code>@auth</code> en <code>@guest</code> toepassen.</li>
            </ul>
        </div>

        <h2>Concept: Gescheiden Layouts</h2>
        <p>We hanteren hier het <strong>Separation of Concerns</strong> principe op UI-niveau. De behoeften van een beheerder (data invoeren, tabellen, dashboards) zijn compleet anders dan die van een klant (producten bekijken, sfeer, kopen).</p>

        <p>Hoewel de lay-outs verschillen, willen we geen code dupliceren. De HTML-head (met CSS links) en de scripts aan het einde zijn voor beide lay-outs vaak hetzelfde. Daarom hergebruiken we de partials die we in Module 1 hebben gemaakt (<code>start.blade.php</code> en <code>end.blade.php</code>). Dit voldoet aan het <strong>DRY (Don't Repeat Yourself)</strong> principe.</p>

        <h2>De Publieke Masterpage</h2>
        <p>We maken een nieuw bestand aan: <code>resources/views/layouts/layoutpublic.blade.php</code>.</p>
        <p>De structuur is eenvoudiger dan de admin-layout: we hebben geen sidebar nodig, alleen een menubalk bovenaan en een footer onderaan.</p>

        <pre><code class="language-html">
@include('layouts.base.start')

&lt;div class="flex flex-col min-h-screen"&gt;

    &lt;!-- De publieke navigatie --&gt;
    @include('layouts.base.navbarpublic')

    &lt;!-- De content (flex-1 zorgt dat deze alle ruimte pakt) --&gt;
    &lt;main class="flex-1 container mx-auto p-4"&gt;
        @yield('content')
    &lt;/main&gt;

    &lt;!-- De footer --&gt;
    @include('layouts.base.footer')

&lt;/div&gt;

@include('layouts.base.end')
        </code></pre>

        <p>Je ziet dat we verwijzen naar twee nieuwe bestanden: <code>navbarpublic</code> en <code>footer</code>. Deze moeten we nog maken.</p>

        <h2>De Publieke Navigatie</h2>
        <p>Maak het bestand <code>resources/views/layouts/base/navbarpublic.blade.php</code> aan.</p>
        <p>In dit menu willen we logica inbouwen:</p>
        <ul>
            <li>Is de bezoeker een <strong>gast</strong>? Toon dan "Login" en "Registreer".</li>
            <li>Is de bezoeker <strong>ingelogd</strong>? Toon dan de naam van de gebruiker en een link naar het Dashboard (of Admin paneel).</li>
        </ul>

        <h3>Blade Authenticatie Directives</h3>
        <p>Laravel heeft hier handige helpers voor:</p>
        <ul>
            <li><code>@auth</code> ... <code>@endauth</code>: Code hierbinnen is alleen zichtbaar voor ingelogde gebruikers.</li>
            <li><code>@guest</code> ... <code>@endguest</code>: Code hierbinnen is alleen zichtbaar voor niet-ingelogde bezoekers.</li>
        </ul>

        <pre><code class="language-html">
&lt;nav class="bg-white shadow mb-4"&gt;
    &lt;div class="container mx-auto px-4"&gt;
        &lt;div class="flex justify-between h-16"&gt;
            &lt;div class="flex items-center"&gt;
                &lt;a href="/" class="text-xl font-bold text-red-600"&gt;
                    Mijn Webshop
                &lt;/a&gt;
                &lt;div class="ml-10 space-x-4"&gt;
                    &lt;a href="/" class="text-gray-600 hover:text-gray-900"&gt;Home&lt;/a&gt;
                    &lt;a href="#" class="text-gray-600 hover:text-gray-900"&gt;Producten&lt;/a&gt;
                &lt;/div&gt;
            &lt;/div&gt;

            &lt;div class="flex items-center space-x-4"&gt;
                @guest
                    &lt;!-- Alleen voor gasten --&gt;
                    &lt;a href="{{ route('login') }}" class="text-gray-600 hover:text-gray-900"&gt;Login&lt;/a&gt;
                    &lt;a href="{{ route('register') }}" class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700"&gt;Registreer&lt;/a&gt;
                @else
                    &lt;!-- Alleen voor ingelogde users --&gt;
                    &lt;span class="text-gray-600"&gt;Hallo, {{ Auth::user()-&gt;name }}&lt;/span&gt;

                    @if(Auth::user()-&gt;is_admin)
                        &lt;a href="{{ route('admin.categories.index') }}" class="text-blue-600 hover:text-blue-800"&gt;Admin&lt;/a&gt;
                    @endif

                    &lt;form method="POST" action="{{ route('logout') }}" class="inline"&gt;
                        @csrf
                        &lt;button type="submit" class="text-gray-600 hover:text-red-600 ml-4"&gt;Uitloggen&lt;/button&gt;
                    &lt;/form&gt;
                @endguest
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/nav&gt;
        </code></pre>

        <div class="info-box" style="background: var(--bg-content); border: 1px solid var(--border-color); padding: 1rem; border-radius: 0.5rem;">
            <strong>Let op: is_admin check</strong><br>
            In het voorbeeld hierboven zie je <code>Auth::user()->is_admin</code>. Dit werkt alleen als je User model een kolom of attribuut <code>is_admin</code> heeft. In Module 2-3 gaan we dieper in op rollen en rechten. Voor nu kun je dit weglaten of vervangen door een simpele link naar het dashboard.
        </div>

        <h2>De Footer</h2>
        <p>Maak ook nog even <code>resources/views/layouts/base/footer.blade.php</code> aan om de pagina netjes af te sluiten.</p>

        <pre><code class="language-html">
&lt;footer class="bg-gray-800 text-white py-6 mt-auto"&gt;
    &lt;div class="container mx-auto px-4 text-center"&gt;
        &lt;p&gt;&copy; {{ date('Y') }} Mijn Webshop. Alle rechten voorbehouden.&lt;/p&gt;
    &lt;/div&gt;
&lt;/footer&gt;
        </code></pre>

        <h2>Testen van de Layout</h2>
        <p>Om te zien of alles werkt, hebben we een tijdelijke route en view nodig.</p>

        <h3>1. De Route</h3>
        <p>Open <code>routes/web.php</code> en voeg een home-route toe (of pas de bestaande aan):</p>
        <pre><code class="language-php">
Route::get('/', function () {
    return view('home');
})->name('home');
        </code></pre>

        <h3>2. De View</h3>
        <p>Maak <code>resources/views/home.blade.php</code> aan en gebruik je nieuwe layout:</p>
        <pre><code class="language-html">
@extends('layouts.layoutpublic')

@section('content')
    &lt;div class="text-center py-20"&gt;
        &lt;h1 class="text-4xl font-bold mb-4"&gt;Welkom in onze shop&lt;/h1&gt;
        &lt;p class="text-xl text-gray-600"&gt;Bekijk onze geweldige collectie spellen.&lt;/p&gt;
    &lt;/div&gt;
@endsection
        </code></pre>

        <p>Ga nu in je browser naar de root van je applicatie (bijv. <code>http://localhost:8000</code>). Je zou nu de nieuwe publieke layout moeten zien, met de Login/Registreer knoppen als je niet bent ingelogd.</p>

    </main>

    <aside class="sidebar-right">
        <div class="toc-container">
            <h4>Inhoud</h4>
            <ul id="toc-list" class="toc-list">
            </ul>
        </div>
    </aside>
</div>
<div data-include="../../footer.html"></div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="../../script.js"></script>
</body>
</html>