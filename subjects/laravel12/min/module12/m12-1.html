<!DOCTYPE html>
<html lang="nl" data-theme="light" data-color="red">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF Generatie</title>

    <script src="../../../../assets/js/theme-init.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <link rel="stylesheet" href="../../../../assets/css/style.css">
</head>
<body>

<div data-include="../../../../components/header.html"></div>

<div class="layout-wrapper">
    <div data-include="../../../../components/sidebar.html"></div>

    <main class="main-content">
        <h1>PDF Generatie</h1>
        <p>In zakelijke applicaties is het genereren van PDF-bestanden bijna onvermijdelijk. Denk aan facturen, pakbonnen, contracten of certificaten. Hoewel je HTML in de browser kunt printen, heb je daar geen controle over de exacte paginanummering, pagina-einden en lay-out op verschillende printers.</p>

        <h2>Leeruitkomsten</h2>
        <ul style="margin-bottom: 2rem;">
            <li>Ik kan een PDF genereren met de DomPDF package.</li>
            <li>Ik weet hoe ik een Blade view kan gebruiken als template voor mijn PDF.</li>
            <li>Ik kan de PDF als download aanbieden of direct in de browser tonen (streamen).</li>
        </ul>

        <h3>Waarom: Een vaste lay-out</h3>
        <p>Een PDF garandeert dat de ontvanger het document precies zo ziet als jij bedoeld hebt, ongeacht of ze het op een telefoon of desktop openen. In Laravel gebruiken we hiervoor de standaard package <strong>laravel-dompdf</strong>. Dit is een 'wrapper' om de DomPDF library, die HTML/CSS omzet naar PDF.</p>

        <h3>Hoe: Installatie en Basisgebruik</h3>
        <p>Na installatie via Composer (<code>composer require barryvdh/laravel-dompdf</code>), kun je de `Pdf` facade gebruiken. De kracht zit hem in het feit dat je gewoon <strong>Blade Views</strong> kunt hergebruiken. Je hoeft dus geen nieuwe taal te leren om PDF's te maken; je bouwt gewoon HTML.</p>

        <div class="note-box">Bestand: <code>app/Http/Controllers/InvoiceController.php</code></div>
        <pre><code class="language-php">
use Barryvdh\DomPDF\Facade\Pdf;
use App\Models\Order;

public function show(Order $order)
{
    // 1. Data verzamelen (zoals je gewend bent)
    $data = [
        'order' => $order,
        'customer' => $order->user,
        'lines' => $order->orderLines,
    ];

    // 2. View laden in het PDF object
    // 'pdf.invoice' is gewoon een blade file in resources/views/pdf/invoice.blade.php
    $pdf = Pdf::loadView('pdf.invoice', $data);

    // 3. Optie A: Downloaden (forceer opslaan bij client)
    return $pdf->download('factuur-'.$order->id.'.pdf');

    // 3. Optie B: Streamen (toon in browser)
    // return $pdf->stream();
}
        </code></pre>

        <h3>Styling en Beperkingen</h3>
        <p>Let op: PDF-engines zijn geen moderne webbrowsers. DomPDF ondersteunt CSS 2.1 en een beetje CSS 3. Moderne snufjes zoals Flexbox en CSS Grid werken vaak <strong>niet</strong> of slecht. </p>
        <p><strong>Advies:</strong> Gebruik voor PDF's ouderwetse <code>&lt;table&gt;</code> structuren voor lay-out en inline CSS of een simpele <code>&lt;style&gt;</code> blok in de head. Externe stylesheets (Tailwind) werken vaak niet goed tenzij je ze compileert naar pure CSS en inline inlaadt.</p>

        <div class="note-box">Bestand: <code>resources/views/pdf/invoice.blade.php</code></div>
        <pre><code class="language-html">
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset="utf-8"&gt;
    &lt;title&gt;Factuur&lt;/title&gt;
    &lt;style&gt;
        body { font-family: sans-serif; }
        .table { width: 100%; border-collapse: collapse; }
        .table th, .table td { border: 1px solid #ddd; padding: 8px; }
        .page-break { page-break-after: always; }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Factuur #{{ $order->id }}&lt;/h1&gt;

    &lt;table class="table"&gt;
        &lt;thead&gt;
            &lt;tr&gt;
                &lt;th&gt;Product&lt;/th&gt;
                &lt;th&gt;Prijs&lt;/th&gt;
            &lt;/tr&gt;
        &lt;/thead&gt;
        &lt;tbody&gt;
            @foreach($lines as $line)
                &lt;tr&gt;
                    &lt;td&gt;{{ $line->product_name }}&lt;/td&gt;
                    &lt;td&gt;â‚¬ {{ number_format($line->price, 2, ',', '.') }}&lt;/td&gt;
                &lt;/tr&gt;
            @endforeach
        &lt;/tbody&gt;
    &lt;/table&gt;

    &lt;div class="page-break"&gt;&lt;/div&gt;
    &lt;p&gt;Voorwaarden op pagina 2...&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
        </code></pre>
    </main>

    <aside class="sidebar-right">
        <div class="toc-container">
            <h4>Inhoud</h4>
            <ul id="toc-list" class="toc-list">
            </ul>
        </div>
    </aside>
</div>

<div data-include="../../../../components/footer.html"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="../../../../assets/js/script.js"></script>
</body>
</html>