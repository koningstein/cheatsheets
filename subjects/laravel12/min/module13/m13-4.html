<!DOCTYPE html>
<html lang="nl" data-theme="light" data-color="red">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unit & Feature Tests (Pest) - Laravel 12</title>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <link rel="stylesheet" href="../../style.css">
</head>
<body>

<header>
    <a href="../../index.html" class="logo">
        <svg width="30" height="30" viewBox="0 0 100 100" fill="currentColor"><path d="M50 0L10 20L10 80L50 100L90 80L90 20L50 0Z"/></svg>
        Laravel 12
    </a>
    <div class="header-controls">
        <button class="btn-control" id="color-toggle">ðŸŽ¨ Kleur</button>
        <button class="btn-control" id="theme-toggle">ðŸŒ“ Thema</button>
        <button class="mobile-menu-btn" id="menu-toggle">â˜°</button>
    </div>
</header>

<div class="layout-wrapper">
    <nav class="sidebar-left">

        <div class="nav-group">
            <h3>Installatie</h3>
            <div class="nav-item-container">
                <ul class="submenu" style="display:block; padding-left:0;">
                    <li><a href="../../index.html" style="border-left:none; padding-left:0.75rem;">Overzicht</a></li>
                </ul>
            </div>
        </div>

        <div class="nav-group">
            <h3>Opdrachten</h3>

            <div class="nav-item-container">
                <button class="nav-toggle">
                    Module 1: Basis CRUD
                    <svg class="chevron" viewBox="0 0 24 24"><path d="M7 10l5 5 5-5z"/></svg>
                </button>
                <ul class="submenu">
                    <li><a href="../module1/m1-1.html">Model & Migration</a></li>
                    <li><a href="../module1/m1-2.html">Factory & Seeding</a></li>
                    <li><a href="../module1/m1-3.html">Layouts & Tailwind</a></li>
                    <li><a href="../module1/m1-4.html">Controller Index</a></li>
                    <li><a href="../module1/m1-5.html">Create & Store</a></li>
                    <li><a href="../module1/m1-6.html">Validatie & Flash</a></li>
                    <li><a href="../module1/m1-7.html">Detailpagina (Show)</a></li>
                    <li><a href="../module1/m1-8.html">Edit & Update</a></li>
                    <li><a href="../module1/m1-9.html">Delete & Destroy</a></li>
                </ul>
            </div>

            <div class="nav-item-container">
                <button class="nav-toggle">
                    Module 2: Users & Security
                    <svg class="chevron" viewBox="0 0 24 24"><path d="M7 10l5 5 5-5z"/></svg>
                </button>
                <ul class="submenu">
                    <li><a href="../module2/m2-1.html">Publieke Layout</a></li>
                    <li><a href="../module2/m2-2.html">Simpele Publieke Pagina</a></li>
                    <li><a href="../module2/m2-3.html">Roles & Permissions</a></li>
                    <li><a href="../module2/m2-4.html">Aanmaken van Users</a></li>
                    <li><a href="../module2/m2-5.html">Middleware bij Routes</a></li>
                    <li><a href="../module2/m2-6.html">Rolgebaseerde Toegang</a></li>
                </ul>
            </div>

            <div class="nav-item-container">
                <button class="nav-toggle">
                    Module 3: Advanced Admin
                    <svg class="chevron" viewBox="0 0 24 24"><path d="M7 10l5 5 5-5z"/></svg>
                </button>
                <ul class="submenu">
                    <li><a href="../module3/m3-1.html">Models & Migrations</a></li>
                    <li><a href="../module3/m3-2.html">Factories met Relaties</a></li>
                    <li><a href="../module3/m3-3.html">Seeders met Relaties</a></li>
                    <li><a href="../module3/m3-4.html">Index & Eager Loading</a></li>
                    <li><a href="../module3/m3-5.html">Permissions</a></li>
                    <li><a href="../module3/m3-6.html">Create & Dropdowns</a></li>
                    <li><a href="../module3/m3-7.html">Store & Validatie</a></li>
                    <li><a href="../module3/m3-8.html">Show & Relaties</a></li>
                    <li><a href="../module3/m3-9.html">Edit & Pre-select</a></li>
                    <li><a href="../module3/m3-10.html">Update & Logica</a></li>
                    <li><a href="../module3/m3-11.html">Delete View</a></li>
                    <li><a href="../module3/m3-12.html">Destroy & Constraints</a></li>
                </ul>
            </div>

            <div class="nav-item-container">
                <button class="nav-toggle">
                    Module 4: Webshop Features
                    <svg class="chevron" viewBox="0 0 24 24"><path d="M7 10l5 5 5-5z"/></svg>
                </button>
                <ul class="submenu">
                    <li><a href="../module4/m4-1.html">Publieke Productpagina</a></li>
                    <li><a href="../module4/m4-2.html">De Product Show</a></li>
                    <li><a href="../module4/m4-3.html">Reviews Setup (DB)</a></li>
                    <li><a href="../module4/m4-4.html">Reviews Tonen</a></li>
                    <li><a href="../module4/m4-5.html">Reviews Plaatsen</a></li>
                    <li><a href="../module4/m4-6.html">Winkelwagen Setup</a></li>
                    <li><a href="../module4/m4-7.html">Winkelwagen Tonen</a></li>
                    <li><a href="../module4/m4-8.html">Winkelwagen Wijzigen</a></li>
                </ul>
            </div>

            <div class="nav-item-container">
                <button class="nav-toggle">
                    Module 5: Orders & Validatie
                    <svg class="chevron" viewBox="0 0 24 24"><path d="M7 10l5 5 5-5z"/></svg>
                </button>
                <ul class="submenu">
                    <li><a href="../module5/m5-1.html">Orders Structuur</a></li>
                    <li><a href="../module5/m5-2.html">Order Seeds</a></li>
                    <li><a href="../module5/m5-3.html">Orders Opslaan</a></li>
                    <li><a href="../module5/m5-4.html">Orders Tonen</a></li>
                    <li><a href="../module5/m5-5.html">Order naar PDF</a></li>
                </ul>
            </div>
        </div>

        <div class="nav-group">
            <h3>Thema's</h3>

            <div class="nav-item-container">
                <button class="nav-toggle">
                    Database & Models
                    <svg class="chevron" viewBox="0 0 24 24"><path d="M7 10l5 5 5-5z"/></svg>
                </button>
                <ul class="submenu">
                    <li><a href="../module6/m6-1.html">Migrations & Datatypes</a></li>
                    <li><a href="../module6/m6-2.html">Foreign Key Constraints</a></li>
                    <li><a href="../module6/m6-3.html">Model Conventions</a></li>
                    <li><a href="../module6/m6-4.html">Mass Assignment</a></li>
                    <li><a href="../module6/m6-5.html">Factories (Faker)</a></li>
                    <li><a href="../module6/m6-6.html">Seeders & DatabaseState</a></li>
                    <li><a href="../module6/m6-7.html">Soft Deletes</a></li>
                    <li><a href="../module6/m6-8.html">Casts & Accessors</a></li>
                </ul>
            </div>

            <div class="nav-item-container">
                <button class="nav-toggle">
                    Eloquent Relaties
                    <svg class="chevron" viewBox="0 0 24 24"><path d="M7 10l5 5 5-5z"/></svg>
                </button>
                <ul class="submenu">
                    <li><a href="../module7/m7-1.html">One to One (HasOne)</a></li>
                    <li><a href="../module7/m7-2.html">One to Many (HasMany)</a></li>
                    <li><a href="../module7/m7-3.html">Many to Many</a></li>
                    <li><a href="../module7/m7-4.html">Eager Loading</a></li>
                    <li><a href="../module7/m7-5.html">Query Scopes</a></li>
                    <li><a href="../module7/m7-6.html">Collections Methods</a></li>
                    <li><a href="../module7/m7-7.html">Pivot Tabellen</a></li>
                </ul>
            </div>

            <div class="nav-item-container">
                <button class="nav-toggle">
                    Routing & Controllers
                    <svg class="chevron" viewBox="0 0 24 24"><path d="M7 10l5 5 5-5z"/></svg>
                </button>
                <ul class="submenu">
                    <li><a href="../module8/m8-1.html">Basic Routing</a></li>
                    <li><a href="../module8/m8-2.html">Named Routes & Groups</a></li>
                    <li><a href="../module8/m8-3.html">Route Model Binding</a></li>
                    <li><a href="../module8/m8-4.html">Resource Controllers</a></li>
                    <li><a href="../module8/m8-5.html">Single Action Controllers</a></li>
                    <li><a href="../module8/m8-6.html">Redirects & Responses</a></li>
                    <li><a href="../module8/m8-7.html">Dependency Injection</a></li>
                </ul>
            </div>

            <div class="nav-item-container">
                <button class="nav-toggle">
                    Blade & Frontend
                    <svg class="chevron" viewBox="0 0 24 24"><path d="M7 10l5 5 5-5z"/></svg>
                </button>
                <ul class="submenu">
                    <li><a href="../module9/m9-1.html">Layout Inheritance</a></li>
                    <li><a href="../module9/m9-2.html">Components & Slots</a></li>
                    <li><a href="../module9/m9-3.html">Stacks & Push</a></li>
                    <li><a href="../module9/m9-4.html">Control Structures</a></li>
                    <li><a href="../module9/m9-5.html">Auth Directives</a></li>
                    <li><a href="../module9/m9-6.html">Service Injection</a></li>
                    <li><a href="../module9/m9-7.html">Tailwind Patterns</a></li>
                    <li><a href="../module9/m9-8.html">Pagination</a></li>
                    <li><a href="../module9/m9-9.html">Flash messages</a></li>
                    <li><a href="../module9/m9-10.html">Livewire</a></li>
                    <li><a href="../module9/m9-11.html">Flux UI</a></li>
                </ul>
            </div>

            <div class="nav-item-container">
                <button class="nav-toggle">
                    Validatie & Forms
                    <svg class="chevron" viewBox="0 0 24 24"><path d="M7 10l5 5 5-5z"/></svg>
                </button>
                <ul class="submenu">
                    <li><a href="../module10/m10-1.html">Controller Validatie</a></li>
                    <li><a href="../module10/m10-2.html">Errors weergeven</a></li>
                    <li><a href="../module10/m10-3.html">Form requests</a></li>
                    <li><a href="../module10/m10-4.html">Database regels</a></li>
                    <li><a href="../module10/m10-5.html">Custom Error Messages</a></li>
                    <li><a href="../module10/m10-6.html">CSRF en Old input</a></li>
                </ul>
            </div>

            <div class="nav-item-container">
                <button class="nav-toggle">
                    Security & Auth
                    <svg class="chevron" viewBox="0 0 24 24"><path d="M7 10l5 5 5-5z"/></svg>
                </button>
                <ul class="submenu">
                    <li><a href="../module11/m11-1.html">Auth Flow</a></li>
                    <li><a href="../module11/m11-2.html">Middleware</a></li>
                    <li><a href="../module11/m11-3.html">Gates</a></li>
                    <li><a href="../module11/m11-4.html">Policies</a></li>
                    <li><a href="../module11/m11-5.html">Spatie Permissions</a></li>
                    <li><a href="../module11/m11-6.html">Password Hashing</a></li>
                    <li><a href="../module11/m11-7.html">Helper Functions</a></li>
                    <li><a href="../module11/m11-8.html">Email & Password Confirm</a></li>
                </ul>
            </div>

            <div class="nav-item-container">
                <button class="nav-toggle">
                    Features
                    <svg class="chevron" viewBox="0 0 24 24"><path d="M7 10l5 5 5-5z"/></svg>
                </button>
                <ul class="submenu">
                    <li><a href="../module12/m12-1.html">PDF Generatie</a></li>
                    <li><a href="../module12/m12-2.html">Excel Import/Export</a></li>
                    <li><a href="../module12/m12-3.html">Mail & Notifications</a></li>
                    <li><a href="../module12/m12-4.html">File Storage</a></li>
                    <li><a href="../module12/m12-5.html">HTTP Client</a></li>
                    <li><a href="../module12/m12-6.html">Events & Listeners</a></li>
                    <li><a href="../module12/m12-7.html">Artisan Commands</a></li>
                </ul>
            </div>

            <div class="nav-item-container active">
                <button class="nav-toggle">
                    Automated Testing
                    <svg class="chevron" viewBox="0 0 24 24"><path d="M7 10l5 5 5-5z"/></svg>
                </button>
                <ul class="submenu" style="display: block;">
                    <li><a href="m13-1.html">Introductie & PHPUnit</a></li>
                    <li><a href="m13-2.html">Unit vs Feature Tests</a></li>
                    <li><a href="m13-3.html">Introductie Pest</a></li>
                    <li><a href="m13-4.html" class="current">Unit & Feature Tests (Pest)</a></li>
                    <li><a href="m13-5.html">Database Testing & Seeding</a></li>
                    <li><a href="m13-6.html">HTTP Testing</a></li>
                    <li><a href="m13-7.html">Mocking & Spies</a></li>
                    <li><a href="m13-8.html">Faking</a></li>
                    <li><a href="m13-9.html">Browser Testing (Dusk)</a></li>
                </ul>
            </div>

            <div class="nav-item-container">
                <button class="nav-toggle">
                    QA Tools & Workflow
                    <svg class="chevron" viewBox="0 0 24 24"><path d="M7 10l5 5 5-5z"/></svg>
                </button>
                <ul class="submenu">
                    <li><a href="../module14/m14-1.html">Static Analysis (Larastan)</a></li>
                    <li><a href="../module14/m14-2.html">Code Style (Pint)</a></li>
                    <li><a href="../module14/m14-3.html">Debugging & Debugbar</a></li>
                    <li><a href="../module14/m14-4.html">Git Workflow</a></li>
                    <li><a href="../module14/m14-5.html">CI/CD Basics</a></li>
                </ul>
            </div>

        </div>
    </nav>

    <main class="main-content">
        <h1>Refactoring naar Pest</h1>
        <p>We hebben gezien hoe PHPUnit werkt met classes en methodes. Dat is prima, maar het kan veel beknopter. Nu gaan we dezelfde tests herschrijven naar Pest. Dit laat goed zien hoe je bestaande kennis toepast in de nieuwe, modernere syntax.</p>

        <h2>Leeruitkomsten</h2>
        <ul style="margin-bottom: 2rem;">
            <li>Ik kan een PHPUnit Unit test herschrijven naar Pest.</li>
            <li>Ik kan een PHPUnit Feature test herschrijven naar Pest.</li>
            <li>Ik kan tests groeperen met de `describe()` functie.</li>
        </ul>

        <h3>1. Unit Test (Refactored)</h3>
        <p>Herinner je de <code>PriceCalculatorTest</code>? In PHPUnit moesten we een class maken die overerfde van <code>TestCase</code>. In Pest hebben we geen class structuur nodig. We kunnen direct beginnen met testen.</p>

        <div class="note-box">Bestand: <code>tests/Unit/PriceCalculatorTest.php</code></div>
        <pre><code class="language-php">
use App\Services\PriceCalculator;

// In plaats van 'public function test_it_calculates...'
// gebruiken we gewoon de test() functie.
test('it calculates 21 percent vat correctly', function () {
    // 1. Arrange
    $calculator = new PriceCalculator();

    // 2. Act
    $result = $calculator->calculateVat(100.00, 21);

    // 3. Assert (met de fijne expect syntax)
    expect($result)->toBe(121.00);
});
        </code></pre>

        <h3>2. Feature Test (Refactored)</h3>
        <p>Ook Feature tests zijn veel compacter. Je hebt nog steeds toegang tot alle handige Laravel helpers zoals <code>get()</code>, <code>post()</code> en <code>actingAs()</code>. Deze zijn beschikbaar via <code>$this</code> binnen de closure, of zelfs direct als functie in sommige Pest-configuraties.</p>
        <p>We gebruiken hier <code>it()</code> omdat dat lekkerder leest: "It shows the projects page".</p>

        <div class="note-box">Bestand: <code>tests/Feature/ProjectTest.php</code></div>
        <pre><code class="language-php">
it('shows the projects page with correct content', function () {
    // We kunnen assertions ketenen (chaining)
    $this->get('/projects')
        ->assertStatus(200)
        ->assertSee('Onze Projecten')
        ->assertDontSee('Server Error');
});
        </code></pre>

        <h3>Grouping met `describe()`</h3>
        <p>In PHPUnit groepeer je tests door ze in Ã©Ã©n class te zetten (bijv. <code>AuthenticationTest</code>). Omdat Pest geen classes gebruikt, zou je kunnen denken dat je het overzicht verliest. Gelukkig is er de <code>describe()</code> functie.</p>
        <p>Hiermee kun je tests logisch bij elkaar clusteren. Dit is niet alleen voor de leesbaarheid van je code, maar ook voor de output in je terminal.</p>

        <pre><code class="language-php">
describe('authentication', function () {

    // Al deze tests horen bij 'authentication'

    test('login page is visible', function () {
        $this->get('/login')->assertStatus(200);
    });

    test('users can authenticate', function () {
        // ... login logica ...
    });

    test('invalid password gives error', function () {
        // ... error logica ...
    });

});
        </code></pre>

        <p>Als je dit draait, zie je in de terminal een mooi kopje "Authentication" met daaronder de specifieke tests.</p>
    </main>

    <aside class="sidebar-right">
        <div class="toc-container">
            <h4>Inhoud</h4>
            <ul id="toc-list" class="toc-list">
            </ul>
        </div>
    </aside>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="../../script.js"></script>
</body>
</html>