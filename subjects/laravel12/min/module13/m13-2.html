<!DOCTYPE html>
<html lang="nl" data-theme="light" data-color="red">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Het cruciale verschil: Unit vs Feature</title>

    <script src="../../../../assets/js/theme-init.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <link rel="stylesheet" href="../../../../assets/css/style.css">
</head>
<body>

<div data-include="../../../../components/header.html"></div>

<div class="layout-wrapper">
    <div data-include="../../../../components/sidebar.html"></div>

    <main class="main-content">
        <h1>Het cruciale verschil: Unit vs Feature</h1>
        <p>Een van de belangrijkste concepten in testen is begrijpen <em>wat</em> je test. Een veelgemaakte fout bij beginners is om alles met Feature tests te willen testen. Dit maakt je test suite traag en moeilijk te onderhouden. We kijken naar de twee smaken: <strong>Unit</strong> en <strong>Feature</strong>.</p>

        <h2>Leeruitkomsten</h2>
        <ul style="margin-bottom: 2rem;">
            <li>Ik ken de kenmerken van een Unit Test (snelheid, isolatie).</li>
            <li>Ik ken de kenmerken van een Feature Test (integratie, simulatie).</li>
            <li>Ik weet wanneer ik welk type test moet inzetten.</li>
        </ul>

        <h3>1. Unit Tests (De Bouwstenen)</h3>
        <p>Een Unit Test heeft een zeer beperkte <strong>scope</strong>. Je test één specifieke class of methode in absolute isolatie.
            <br>Denk aan de analogie van een auto: Een Unit Test controleert of <em>één specifiek tandwieltje</em> soepel draait als je het los op tafel legt.</p>

        <p><strong>Kenmerken van een Unit Test:</strong></p>
        <ul>
            <li><strong>Snelheid:</strong> Razendsnel. Je kunt er duizenden per seconde draaien.</li>
            <li><strong>Geen Database:</strong> Je raakt de database niet aan.</li>
            <li><strong>Geen HTTP:</strong> Je simuleert geen web-requests.</li>
            <li><strong>Geen Laravel Framework:</strong> Vaak start Laravel niet eens op.</li>
        </ul>

        <p>Laten we een voorbeeld nemen. Stel je hebt een Service Class die BTW berekent. Dit is pure rekenlogica.</p>

        <div class="note-box">De Code: <code>app/Services/PriceCalculator.php</code></div>
        <pre><code class="language-php">
namespace App\Services;

class PriceCalculator
{
    public function calculateVat(float $amount, float $percentage): float
    {
        return $amount * (1 + ($percentage / 100));
    }
}
        </code></pre>

        <p>De bijbehorende Unit Test maakt gewoon een instantie van de class (<code>new PriceCalculator</code>) en roept de functie aan. Let op dat we de kale <code>PHPUnit\Framework\TestCase</code> gebruiken, niet de Laravel variant.</p>

        <div class="note-box">De Test: <code>tests/Unit/PriceCalculatorTest.php</code></div>
        <pre><code class="language-php">
namespace Tests\Unit;

use PHPUnit\Framework\TestCase; // Kale PHPUnit
use App\Services\PriceCalculator;

class PriceCalculatorTest extends TestCase
{
    public function test_it_calculates_vat_correctly()
    {
        // 1. Arrange (Klaarzetten)
        $calculator = new PriceCalculator();

        // 2. Act (Actie uitvoeren)
        $result = $calculator->calculateVat(100.00, 21);

        // 3. Assert (Controleren)
        $this->assertEquals(121.00, $result);
    }
}
        </code></pre>

        <h3>2. Feature Tests (Het Voertuig)</h3>
        <p>Een Feature Test heeft een grote <strong>scope</strong>. Je test een functionaliteit vanuit het oogpunt van de gebruiker.
            <br>Analogie: Je test of de auto start, rijdt en remt. Hierbij werken de motor, de wielen en de remmen samen.</p>

        <p><strong>Kenmerken van een Feature Test:</strong></p>
        <ul>
            <li><strong>Snelheid:</strong> Trager. Voor elke test moet het Laravel framework opstarten.</li>
            <li><strong>Integratie:</strong> Test de samenwerking tussen Routing, Controllers, Database en Views.</li>
            <li><strong>Simulatie:</strong> Je doet alsof je een HTTP request maakt (bijv. <code>GET /projects</code>).</li>
        </ul>

        <p>Hier testen we of de projecten-pagina bereikbaar is. In de achtergrond moet Laravel de route vinden, de controller uitvoeren, data ophalen (optioneel) en de view renderen.</p>

        <div class="note-box">De Test: <code>tests/Feature/ProjectTest.php</code></div>
        <pre><code class="language-php">
namespace Tests\Feature;

use Tests\TestCase; // De Laravel TestCase (start de app op)

class ProjectTest extends TestCase
{
    public function test_user_can_view_projects_page()
    {
        // Act: Doe een gesimuleerd HTTP GET request
        $response = $this->get('/projects');

        // Assert:
        // 1. Krijgen we een 200 OK terug?
        $response->assertStatus(200);

        // 2. Staat de juiste tekst op het scherm?
        $response->assertSee('Onze Projecten');
    }
}
        </code></pre>

        <h3>Wanneer kies je wat?</h3>
        <p>Gebruik de volgende vuistregel:</p>
        <ul>
            <li><strong>Unit Tests:</strong> Voor complexe berekeningen, algoritmes, string-manipulaties of business logica in Models/Services. Als het "fout" kan gaan in de logica, schrijf je een unit test.</li>
            <li><strong>Feature Tests:</strong> Voor alles wat met de "flow" van je applicatie te maken heeft. Werkt de route? Wordt er iets opgeslagen in de database? Krijg ik een validatie-error als ik het formulier leeg laat?</li>
        </ul>
    </main>

    <aside class="sidebar-right">
        <div class="toc-container">
            <h4>Inhoud</h4>
            <ul id="toc-list" class="toc-list">
            </ul>
        </div>
    </aside>
</div>

<div data-include="../../../../components/footer.html"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="../../../../assets/js/script.js"></script>
</body>
</html>