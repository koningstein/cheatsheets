<!DOCTYPE html>
<html lang="nl" data-theme="light" data-color="red">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Browser Testing met Laravel Dusk</title>

    <script src="../../../../assets/js/theme-init.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <link rel="stylesheet" href="../../../../assets/css/style.css">
</head>
<body>

<div data-include="../../../../components/header.html"></div>

<div class="layout-wrapper">
    <div data-include="../../../../components/sidebar.html"></div>

    <main class="main-content">
        <h1>Browser Testing met Laravel Dusk</h1>
        <p>Feature tests zijn snel, maar ze simuleren alleen het PHP-gedeelte. Ze voeren geen JavaScript uit. Als je een applicatie hebt die zwaar leunt op JavaScript (Vue, React, AlpineJS, of gewoon complexe DOM-manipulatie), dan heb je een echte browser nodig om te testen. Dit heet <strong>End-to-End (E2E) testing</strong>. Laravel gebruikt hiervoor <strong>Dusk</strong>.</p>

        <h2>Leeruitkomsten</h2>
        <ul style="margin-bottom: 2rem;">
            <li>Ik weet wanneer ik Dusk moet gebruiken (JavaScript testing).</li>
            <li>Ik kan een eenvoudige Dusk test schrijven en uitvoeren.</li>
            <li>Ik begrijp het verschil tussen Feature tests en Browser tests.</li>
        </ul>

        <h3>Wat is Dusk?</h3>
        <p>Laravel Dusk bestuurt een echte Chrome-browser (headless, dus je ziet hem niet, tenzij je dat wilt). Hij klikt op knoppen, vult velden in en wacht tot elementen verschijnen, precies zoals een echte gebruiker.</p>

        <h3>Installatie</h3>
        <p>Dusk is een aparte package (dev dependency).</p>
        <div class="note-box">Terminal</div>
        <pre><code class="language-bash">
composer require --dev laravel/dusk
php artisan dusk:install
        </code></pre>

        <h3>Een Dusk Test Schrijven</h3>
        <p>Dusk tests staan in <code>tests/Browser</code>. De syntax lijkt op Feature tests, maar je werkt met een <code>$browser</code> object.</p>

        <div class="note-box">Bestand: <code>tests/Browser/LoginTest.php</code></div>
        <pre><code class="language-php">
use Laravel\Dusk\Browser;

test('user can login', function () {
    $this->browse(function (Browser $browser) {
        $browser->visit('/login')
                ->type('email', 'henk@test.com')
                ->type('password', 'geheim')
                ->press('Inloggen')
                ->assertPathIs('/dashboard')
                ->assertSee('Welkom Henk');
    });
});
        </code></pre>

        <h3>Wachten op JavaScript</h3>
        <p>Het krachtigste van Dusk is dat het kan wachten op asynchrone dingen (AJAX calls, animaties).</p>
        <pre><code class="language-php">
$browser->visit('/chat')
        ->type('message', 'Hallo!')
        ->press('Verzend')
        ->waitForText('Bericht verzonden!') // Wacht tot de tekst verschijnt
        ->assertSee('Hallo!');
        </code></pre>

        <h3>Let op!</h3>
        <p>Dusk tests zijn <strong>veel trager</strong> dan Feature tests. Gebruik ze alleen voor functionaliteit die je niet met gewone Feature tests kunt afdekken (dus: JavaScript features).</p>
    </main>

    <aside class="sidebar-right">
        <div class="toc-container">
            <h4>Inhoud</h4>
            <ul id="toc-list" class="toc-list">
            </ul>
        </div>
    </aside>
</div>

<div data-include="../../../../components/footer.html"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="../../../../assets/js/script.js"></script>
</body>
</html>