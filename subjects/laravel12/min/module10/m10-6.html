<!DOCTYPE html>
<html lang="nl" data-theme="light" data-color="red">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSRF & Old Input</title>

    <script src="../../../../assets/js/theme-init.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <link rel="stylesheet" href="../../../../assets/css/style.css">
</head>
<body>

<div data-include="../../../../components/header.html"></div>

<div class="layout-wrapper">
    <div data-include="../../../../components/sidebar.html"></div>

    <main class="main-content">
        <h1>CSRF & Old Input</h1>
        <p>Bij het werken met formulieren zijn twee dingen cruciaal: beveiliging tegen aanvallen en gebruiksvriendelijkheid bij fouten.</p>

        <h2>Leeruitkomsten</h2>
        <ul style="margin-bottom: 2rem;">
            <li>Ik weet hoe ik CSRF-beveiliging toepas met <code>@csrf</code>.</li>
            <li>Ik begrijp wat 'Old Input' is en waarom het belangrijk is.</li>
            <li>Ik kan de <code>old()</code> helper gebruiken om data terug te zetten in formulieren.</li>
        </ul>

        <h3>Beveiliging & UX</h3>
        <p>Bij het werken met formulieren zijn twee dingen cruciaal: beveiliging tegen aanvallen en gebruiksvriendelijkheid bij fouten.</p>

        <h3>CSRF Beveiliging</h3>
        <p>CSRF staat voor <em>Cross-Site Request Forgery</em>. Dit is een aanval waarbij een kwaadaardige site een formulier verstuurt naar jouw applicatie namens een ingelogde gebruiker. Laravel beschermt je hiertegen, maar je moet wel een token meesturen in elk POST, PUT of DELETE formulier.</p>
        <p>Gebruik hiervoor de <code>@csrf</code> directive direct na de opening van je formulier.</p>

        <div class="note-box">Bestand: <code>resources/views/projects/create.blade.php</code></div>
        <pre><code class="language-html">
&lt;form method="POST" action="/projects"&gt;
    @csrf
    &lt;!-- inputs... --&gt;
&lt;/form&gt;
        </code></pre>
        <p>Zonder dit token zal Laravel het verzoek blokkeren met een "419 Page Expired" error.</p>

        <h3>Old Input (Data Onthouden)</h3>
        <p>Er is niets vervelender dan een heel formulier invullen, één foutje maken, en alles opnieuw moeten typen. Laravel stuurt bij een validatiefout de ingevulde data terug naar de sessie.</p>
        <p>Je kunt deze data terugplaatsen met de <code>old('veldnaam')</code> helper. Het tweede argument is de standaardwaarde (bijvoorbeeld de huidige waarde bij een edit-formulier).</p>

        <div class="note-box">Bestand: <code>resources/views/projects/create.blade.php</code></div>
        <pre><code class="language-html">
&lt;!-- Input veld --&gt;
&lt;input type="text" name="title" value="{{ old('title') }}"&gt;

&lt;!-- Textarea (let op: tussen de tags, niet in value attribute!) --&gt;
&lt;textarea name="description"&gt;{{ old('description') }}&lt;/textarea&gt;

&lt;!-- Selectbox --&gt;
&lt;select name="category_id"&gt;
    @foreach($categories as $cat)
        &lt;option value="{{ $cat->id }}" {{ old('category_id') ==
            $cat->id ? 'selected' : '' }}&gt;
            {{ $cat->name }}
        &lt;/option&gt;
    @endforeach
&lt;/select&gt;
        </code></pre>
    </main>

    <aside class="sidebar-right">
        <div class="toc-container">
            <h4>Inhoud</h4>
            <ul id="toc-list" class="toc-list">
            </ul>
        </div>
    </aside>
</div>

<div data-include="../../../../components/footer.html"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="../../../../assets/js/script.js"></script>
</body>
</html>